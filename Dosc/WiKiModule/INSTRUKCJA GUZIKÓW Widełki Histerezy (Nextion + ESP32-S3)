 INSTRUKCJA GUZIKW: Wideki Histerezy (Nextion + ESP32-S3)1. SPRZT (Co i jak podpi)Do stabilnej pracy wywietlacza i "wideek" potrzebujesz poczenia sprztowego UART.Wywietlacz: Nextion (Seria Basic NX... wystarczy, ale Enhanced NX...K jest szybsza).Modu: ESP32-S3.Zasilanie: Nextion musi mie solidne 5V (osobny zasilacz lub bardzo dobre USB). Jeli ekran mruga przy dotyku -> masz za saby prd.Schemat pocze (Pinologia dla UART1 w S3):To poczenie krzy偶owe. Nie u偶ywaj UART0 (piny 43/44), bo to blokuje wgrywanie kodu!ESP32-S3 PinNextion PinKolor kabla (zazwyczaj)GPIO 18 (TX)RXNiebieskiGPIO 17 (RX)TX呕贸ty5V (VCC)5VCzerwonyGNDGNDCzarny2. SOFTWARE (Biblioteki)Nie u偶ywaj oficjalnej biblioteki ITEAD (jest trudna w konfiguracji). U偶yj biblioteki EasyNextionLibrary, kt贸ra jest standardem dla szybkich projekt贸w.W PlatformIO: Dodaj do platformio.ini:Ini, TOMLlib_deps = 
    seithan/EasyNextionLibrary @ ^1.0.6
3. NEXTION EDITOR (Co wyklika na ekranie)Tutaj tworzymy "bajk" wizualn. Zakadamy, 偶e to Page 7 (index 7).Krok A: Elementy UIPrzecignij na scen:Slider (h0): To bd wideki MIN (np. wcz przy 20掳C).Slider (h1): To bd wideki MAX (np. wycz przy 50掳C).Number (n0): Wywietla warto suwaka MIN.Number (n1): Wywietla warto suwaka MAX.Button (b0): Przycisk "ZAPISZ" (偶eby wysa dane do ESP).Krok B: Kod wewntrz Nextion (Events)Musisz oprogramowa zachowanie suwak贸w bezporednio w edytorze, 偶eby liczby zmieniay si pynnie pod palcem.Dla suwaka h0 (Touch Move Event):Cn0.val=h0.val  // Przepisuje pozycj suwaka do okienka z liczb
Dla suwaka h1 (Touch Move Event):Cn1.val=h1.val
Dla przycisku b0 (Touch Release Event):To jest klucz! Kiedy klikniesz ZAPISZ, ekran wyle specjalny kod do ESP.Cprinth 23 05   // Wylij "Trigger" (kod heksadecymalny, kt贸ry wyapiemy w ESP)
Ustawienie ID: Zapamitaj, 偶e jestemy na stronie 7. Suwaki maj nazwy h0 i h1.4. KOD (C++ dla ESP32-S3)Ten kod robi dwie rzeczy:Nasuchuje przycisku "ZAPISZ".Jak go usyszy -> pobiera wartoci wideek z ekranu i ustawia sterowanie.C++#include <Arduino.h>
#include "EasyNextionLibrary.h"

// Definicja portu Serial dla ESP32-S3 (RX=17, TX=18)
// EasyNextion domylnie szuka Serial2, musimy go zainicjowa rcznie.
EasyNex myNex(Serial1); 

// Zmienne na wideki
int tempMin = 20; // Domylnie
int tempMax = 50; // Domylnie

// --- FUNKCJA ODCZYTUJCA WIDEKI ---
// Wywoujemy j tylko, gdy wciniesz guzik na ekranie
void aktualizujWidelki() {
    // Odczytujemy wartoci suwak贸w ze strony 7 (page7.h0 i page7.h1)
    // UWAGA: Funkcja readNumber wymaga nazwy w formacie "pageName.objName"
    
    // Przechodzimy na stron 7 wirtualnie (opcjonalne, ale bezpieczne)
    // myNex.writeStr("page 7"); 
    
    int nowyMin = myNex.readNumber("page7.h0.val");
    int nowyMax = myNex.readNumber("page7.h1.val");

    // Zabezpieczenie przed bdami (np. gdy min > max)
    if (nowyMin != 777777 && nowyMax != 777777) { // 777777 to kod bdu biblioteki
        if (nowyMin < nowyMax) {
            tempMin = nowyMin;
            tempMax = nowyMax;
            Serial.println("--- ZAKTUALIZOWANO WIDEKI ---");
            Serial.printf("START (Min): %d | STOP (Max): %d\n", tempMin, tempMax);
        } else {
            Serial.println("Bd: Min nie mo偶e by wiksze od Max!");
        }
    }
}

// --- TRIGGER (Wywoywany przez komend printh 23 05 z ekranu) ---
void trigger0() {
  // Ta funkcja uruchomi si sama, jak biblioteka zobaczy kod
  aktualizujWidelki();
}

void setup() {
    Serial.begin(115200); // Debug na USB
    
    // Start komunikacji z Nextion (S3 wymaga podania pin贸w!)
    // Serial1.begin(baud, config, rx, tx)
    Serial1.begin(9600, SERIAL_8N1, 17, 18); 
    
    myNex.begin(9600); // Start biblioteki
    
    Serial.println("System Start. Czekam na ustawienie wideek...");
}

void loop() {
    // 1. To musi by w ptli - nasuchuje ekranu
    myNex.NextionListen();

    // 2. Prosta logika sterowania (Symulacja)
    // Odczytaj sw贸j czujnik tutaj, np. float temp = dht.readTemperature();
    // Tutaj dla testu wpisuj na sztywno:
    int aktualnaTemperatura = 45; 

    // LOGIKA WIDEEK (HISTEREZA)
    if (aktualnaTemperatura <= tempMin) {
        // Wcz grzanie (bo spado poni偶ej minimum)
        // digitalWrite(PIN_PRZEKAZNIKA, HIGH);
    } 
    else if (aktualnaTemperatura >= tempMax) {
        // Wycz grzanie (bo osigno maksimum)
        // digitalWrite(PIN_PRZEKAZNIKA, LOW);
    }
}
JAK TO DZIAA W PRAKTYCE? (Instrukcja obsugi)U偶ytkownik przesuwa suwaki na ekranie. Widzi jak zmieniaj si liczby (dziki kodzie w Nextion Editor).ESP32 na razie nic nie robi (nie obci偶amy procesora cigym pytaniem).U偶ytkownik klika przycisk "ZAPISZ".Ekran wysya tajny kod (printh 23 05).ESP32 w funkcji myNex.NextionListen() wyapuje ten kod.ESP32 "pyta" ekran: "Dobra, to jakie masz tam teraz wartoci na h0 i h1?".Ekran odsya wartoci, a ESP32 aktualizuje zmienne tempMin i tempMax.
